<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Pathtracer (Part 2) | Irene Geng</title> <meta name="author" content="Irene Geng"> <meta name="description" content="raytracing - expansion"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://i-geng.github.io/projects/pathtracer_2/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Irene </span>Geng</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Pathtracer (Part 2)</h1> <p class="post-description">raytracing - expansion</p> </header> <article> <p><strong>Irene Geng and Mingyang Wang</strong></p> <p>In this project:</p> <ul> <li>Expanding the functionality of our raytracer to render additional materials, including mirror (reflective), glass (refractive), and microfacet surfaces.</li> <li>Implementing environment lighting, which allows us to simulate incident radiance from every direction on the sphere.</li> <li>Implementing a thin lens model for the camera, which allows us to simulate different depth of field effects by adjusting the lens radius and focal distance.</li> </ul> <h3 id="part-1-mirror-and-glass-materials">Part 1: Mirror and Glass Materials.</h3> <p>Here is a sequence of 7 images of CBspheres.dae rendered with max ray depth set to 0, 1, 2, 3, 4, 5, and 100. We used 256 samples per pixel and 4 samples per light.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_0-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_0-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_0-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_0.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">m = 0</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_1-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_1-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_1-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_1.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">m = 1</figcaption> </figure> </div> </div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_2-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_2-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_2-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_2.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">m = 2</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_3-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_3-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_3-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_3.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">m = 3</figcaption> </figure> </div> </div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_4-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_4-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_4-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_4.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">m = 4</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_5-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_5-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_5-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_5.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">m = 5</figcaption> </figure> </div> </div> <div class="text-center"> <img src="/assets/img/pathtracer_2/Part1/Writeup_1.1_spheres_256_4_100.png" class="mx-auto d-block img-fluid rounded z-depth-1" alt="Centered Image"> <figcaption class="caption">m = 100</figcaption> </div> <p>When the max ray depth is 0, we only see zero-bounce lighting from the area light on the ceiling, and nothing in the scene is illuminated.</p> <p>For m = 1, we only see direct lighting, which includes zero- and one-bounce lighting; the shadows are black, similar to in Project 3-1. Additionally, the spheres are black, as it takes at least two light bounces for the glass effects of the spheres to be rendered properly (discussed more below).</p> <p>At all higher max ray depths (m &gt; 1), the image is rendered with global illumination. We note that the left sphere is reflective and the right sphere is refractive.</p> <p>For m = 2, the left sphere begins to show a reflection of the environment’s direct lighting from the m = 1 step (we note that the ceiling and other sphere are black, like in the m = 1 case). We see a faint reflection on the right sphere, but do not yet see any refraction (refraction needs at least three bounces, as it must enter and exit the sphere as opposed to reflection just bouncing once).</p> <p>For m = 3, the left sphere shows a reflection of the m = 2 case (thus containing global illumination, but the other sphere is still black), and the right sphere’s glass material is finally beginning to show refraction properly; this is the first image in the sequence that shows the caustic effect.</p> <p>For m = 4, the left sphere’s reflection finally shows the refractive effects of the right sphere (and thus looks like glass). We see a spot of light that has been refracted through the right sphere to land on the right wall of the box.</p> <p>The images rendered with m = 5 and m = 100 look quite similar, with no major additional multibounce effects. The images generally appear less noisy, especially the spot of light on the right wall.</p> <h3 id="part-2-microfacet-materials">Part 2: Microfacet Materials</h3> <p>Here is a sequence of 4 images of CB_dragon_microfacet_au.dae rendered with \(\alpha\) set to 0.005, 0.05, 0.25, and 0.5. We used 256 samples per pixel, 4 samples per light, and max ray depth of 7.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.005-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.005-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.005-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.005.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">alpha = 0.005</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.05-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.05-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.05-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.05.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">alpha = 0.05</figcaption> </figure> </div> </div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.25-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.25-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.25-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.25.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">alpha = 0.25</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.5-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.5-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.5-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part2/Writeup_2.1_dragon_256_4_7-0.5.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">alpha = 0.5</figcaption> </figure> </div> </div> <p>We observe that as we increase \(\alpha\), the dragon looks less and less glossy and more matte-like. Another interesting thing of note is that a higher \(\alpha\) results in a slightly noisier image, likely due to the increased amount/intensity of reflections.</p> <p>Here are two images of CBbunny_microfacet_cu.dae rendered using cosine hemisphere sampling and our importance sampling. We used 64 samples per pixel, 1 sample per light, and max ray depth of 5.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.2_bunny_64_1_5-cosine-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.2_bunny_64_1_5-cosine-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.2_bunny_64_1_5-cosine-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part2/Writeup_2.2_bunny_64_1_5-cosine.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Cosine Sampling</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.2_bunny_64_1_5-importance-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.2_bunny_64_1_5-importance-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.2_bunny_64_1_5-importance-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part2/Writeup_2.2_bunny_64_1_5-importance.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Importance Sampling</figcaption> </figure> </div> </div> <p>We see that the cosine sampling case does not converge as well as the importance sampling case: the bunny is a lot darker/less well lit, and both the bunny and the surrounding environment are a lot more noisy. Importance sampling shows a much better lit bunny, and the bunny has a lot better color and metallic look. However, there is still a noticeable amount of noise on the surrounding walls, which can be fixed with more samples.</p> <p>Here are images of CB_lucy_hg.dae with modified <em>eta</em> and <em>k</em> values. We used parameters corresponding to titanium and cesium metal.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.3_lucy_1024_8_5-Ti-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.3_lucy_1024_8_5-Ti-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.3_lucy_1024_8_5-Ti-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part2/Writeup_2.3_lucy_1024_8_5-Ti.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Titanium</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.3_lucy_1024_8_5-Cs-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.3_lucy_1024_8_5-Cs-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part2/Writeup_2.3_lucy_1024_8_5-Cs-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part2/Writeup_2.3_lucy_1024_8_5-Cs.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Cesium</figcaption> </figure> </div> </div> <p>The titanium Lucy looks silvery, while the cesium Lucy is yellow and gold-like. Cesium is liquid at room temperature and highly reactive, but coding those effects were out of scope for this project and left as an exercise for the reader.</p> <h3 id="part-3-environment-light">Part 3: Environment Light</h3> <p>We used grace.exr for the images in this part of the write-up. Here is a converted .jpg of the environment map.</p> <div class="text-center"> <img src="/assets/img/pathtracer_2/Part3/grace.jpg" class="mx-auto d-block img-fluid rounded z-depth-1" alt="Centered Image"> <figcaption class="caption">grace.jpg</figcaption> </div> <p>Environment lighting simulates incident radiance from every direction on the sphere, from a light source that is infinitely far away. We can use environment lighting to model real-world light sources and environments. For example, the environment lighting of grace.exr simulates the lighting inside of a large cathedral, with direct light sources from multiple lamps and stained glass windows and indirect bounce lighting from every surface.</p> <p>Here is the probability_debug.png file for grace.exr, generated using the save_probability_debug() function.</p> <div class="text-center"> <img src="/assets/img/pathtracer_2/Part3/probability_debug.png" class="mx-auto d-block img-fluid rounded z-depth-1" alt="Centered Image"> <figcaption class="caption">Probability Debug</figcaption> </div> <p>Here is bunny_unlit.dae and grace.exr rendered with uniform sampling and importance sampling. We used 4 samples per pixel, 64 samples per light, and max ray depth of 7.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part3/Writeup_3.3_bunny_unlit_4_64_7-uniform-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part3/Writeup_3.3_bunny_unlit_4_64_7-uniform-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part3/Writeup_3.3_bunny_unlit_4_64_7-uniform-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part3/Writeup_3.3_bunny_unlit_4_64_7-uniform.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Uniform Sampling</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part3/Writeup_3.3_bunny_unlit_4_64_7-importance-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part3/Writeup_3.3_bunny_unlit_4_64_7-importance-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part3/Writeup_3.3_bunny_unlit_4_64_7-importance-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part3/Writeup_3.3_bunny_unlit_4_64_7-importance.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Importance Sampling</figcaption> </figure> </div> </div> <p>The image rendered with importance sampling is much less noisy than the uniform sampling image. The uniform sampling image is almost entirely dark, with specks of color scattered on the model surface. It is additionally somewhat difficult to see the bunny’s shape in the uniform sampling image.</p> <p>Here is bunny_microfacet_cu_unlit.dae and grace.exr rendered with uniform sampling and importance sampling. We used 4 samples per pixel, 64 samples per light, and max ray depth of 7.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part3/Writeup_3.4_bunny_microfacet_unlit_4_64_7-uniform-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part3/Writeup_3.4_bunny_microfacet_unlit_4_64_7-uniform-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part3/Writeup_3.4_bunny_microfacet_unlit_4_64_7-uniform-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part3/Writeup_3.4_bunny_microfacet_unlit_4_64_7-uniform.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Uniform Sampling</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part3/Writeup_3.4_bunny_microfacet_unlit_4_64_7-importance-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part3/Writeup_3.4_bunny_microfacet_unlit_4_64_7-importance-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part3/Writeup_3.4_bunny_microfacet_unlit_4_64_7-importance-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part3/Writeup_3.4_bunny_microfacet_unlit_4_64_7-importance.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Importance Sampling</figcaption> </figure> </div> </div> <p>The image rendered with importance sampling is significantly less noisy and is brighter than the uniform sampling image. Moreover, the bunny has a distinct metallic look in the importance sampling image, but has a very limited effect in the uniform sampling image. The uniform sampling image is much more noisy: the copper material of the bunny model and the pillow it’s placed on has many small bright specks (while there are much fewer in the importance sampling image).</p> <h3 id="part-4-depth-of-field">Part 4: Depth of Field</h3> <p>In a pinhole camera model, we assume a perfect lens aperture of 0. As a result, every point in the scene appears in focus, as all the rays pass through one individual “pinhole” point in the camera, so every point in camera space receives radiance from a single point.</p> <p>In the thin-lens camera model, the camera has a lens (of non zero aperture) that bends and refracts light. Only points that lie at the plane of focus (based on the camera’s focal length) will appear exactly in focus, while points in front or behind the plane of focus will be out of focus and blurred. A point in camera space receives radiance from any point on the thin lens, so we must uniformly sample over the thin lens disk.</p> <p>Here is CBdragon_microfacet_au.dae focused at 4 visibly different depths. We used 512 samples per pixel, 4 samples per light, and an aperture of 0.23.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_4.5-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_4.5-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_4.5-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_4.5.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">d = 4.5</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_4.8-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_4.8-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_4.8-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_4.8.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">d = 4.8</figcaption> </figure> </div> </div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_5-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_5-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_5-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_5.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">d = 5</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_6-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_6-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_6-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part4/Writeup_4.2_512-64_0.05_12_4_0.23_6.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">d = 6</figcaption> </figure> </div> </div> <p>As the focal length increases, the plane of focus moves farther back. The above sequence of images shows the plane of focus at the head of the dragon, the body of the dragon, the tail of the dragon, and the back wall of the Cornell Box.</p> <p>Here is CBbunny_microfacet_cu.dae rendered with 4 different aperture sizes, all with a focal length of 4.6 (focused on the head of the bunny). We used 512 samples per pixel and 4 samples per light.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_0.05_4.6-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_0.05_4.6-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_0.05_4.6-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_0.05_4.6.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">b = 0.05</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_0.3_4.6-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_0.3_4.6-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_0.3_4.6-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_0.3_4.6.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">b = 0.3</figcaption> </figure> </div> </div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_0.6_4.6-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_0.6_4.6-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_0.6_4.6-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_0.6_4.6.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">b = 0.6</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_1_4.6-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_1_4.6-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_1_4.6-1400.webp"></source> <img src="/assets/img/pathtracer_2/Part4/Writeup_4.3_bunny_512-64_0.05_12_4_1_4.6.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">b = 1</figcaption> </figure> </div> </div> <p>As the aperture size increases, the depth of field decreases. When b = 0.05, we see that everything is in focus. However, when b = 0.3 and b = 0.6, we see that the walls of the Cornell Box, the edges of the light on the roof, and the back ear of the bunny begin to appear out of focus. When b = 1, the edges of the back all are almost indistinguishable, and the ears of the bunny are almost entirely blurred out.</p> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Irene Geng. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>